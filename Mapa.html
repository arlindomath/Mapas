<!DOCTYPE html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js">
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
    <link rel="stylesheet"
        href="https://rawcdn.githack.com/python-visualization/folium/master/folium/templates/leaflet.awesome.rotate.css" />
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <style>
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
    </style>

    <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        #map_24b779df8d51480c8aedd059613f930c {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-minimap/3.6.1/Control.MiniMap.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css" />

    <style>
        #export {
            position: absolute;
            top: 5px;
            right: 10px;
            z-index: 999;
            background: white;
            color: black;
            padding: 6px;
            border-radius: 4px;
            font-family: 'Helvetica Neue';
            cursor: pointer;
            font-size: 12px;
            text-decoration: none;
            top: 102px;
        }
    </style>

    <script src="https://rawcdn.githack.com/ljagis/leaflet-measure/2.1.7/dist/leaflet-measure.js"></script>
    <link rel="stylesheet" href="https://rawcdn.githack.com/ljagis/leaflet-measure/2.1.7/dist/leaflet-measure.css" />
</head>

<body>

    <div class="folium-map" id="map_24b779df8d51480c8aedd059613f930c"></div>

    <a href='#' id='export'>Exportar</a>
</body>
<script>
    var map_24b779df8d51480c8aedd059613f930c = L.map(
        "map_24b779df8d51480c8aedd059613f930c", {
            center: [-11.862985, -45.683368],
            crs: L.CRS.EPSG3857,
            zoom: 12,
            zoomControl: true,
            preferCanvas: false,
        }
    );
    L.control.scale().addTo(map_24b779df8d51480c8aedd059613f930c);





    var tile_layer_bfb7b1ce470b4cc9bba2ca612f059479 = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            "attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.",
            "detectRetina": false,
            "maxNativeZoom": 18,
            "maxZoom": 18,
            "minZoom": 0,
            "noWrap": false,
            "opacity": 1,
            "subdomains": "abc",
            "tms": false
        }
    );
    var mini_map_9d3a9659c2c54b13a2243b49fc500a9c = new L.Control.MiniMap(
        tile_layer_bfb7b1ce470b4cc9bba2ca612f059479, {
            "autoToggleDisplay": false,
            "centerFixed": false,
            "collapsedHeight": 25,
            "collapsedWidth": 25,
            "height": 150,
            "minimized": false,
            "position": "bottomright",
            "toggleDisplay": true,
            "width": 150,
            "zoomAnimation": false,
            "zoomLevelOffset": -5
        }
    );
    map_24b779df8d51480c8aedd059613f930c.addControl(mini_map_9d3a9659c2c54b13a2243b49fc500a9c);


    var tile_layer_610ff3de1a5141008e135ea22cad902e = L.tileLayer(
        "http://{s}.google.com/vt/lyrs=s\u0026x={x}\u0026y={y}\u0026z={z}", {
            "attribution": "google",
            "detectRetina": false,
            "maxNativeZoom": 20,
            "maxZoom": 20,
            "minZoom": 5,
            "noWrap": false,
            "opacity": 1,
            "subdomains": ["mt0", "mt1", "mt2", "mt3"],
            "tms": false
        }
    ).addTo(map_24b779df8d51480c8aedd059613f930c);


    var tile_layer_53e7838200ac4d65982559df9f6306e7 = L.tileLayer(
        "https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", {
            "attribution": "Map data: \u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors, \u003ca href=\"http://viewfinderpanoramas.org\"\u003eSRTM\u003c/a\u003e | Map style: \u0026copy; \u003ca href=\"https://opentopomap.org\"\u003eOpenTopoMap\u003c/a\u003e (\u003ca href=\"https://creativecommons.org/licenses/by-sa/3.0/\"\u003eCC-BY-SA\u003c/a\u003e)",
            "detectRetina": false,
            "maxNativeZoom": 17,
            "maxZoom": 17,
            "minZoom": 5,
            "noWrap": false,
            "opacity": 1,
            "subdomains": "abc",
            "tms": false
        }
    ).addTo(map_24b779df8d51480c8aedd059613f930c);


    var options = {
        position: "topleft",
        draw: {},
        edit: {},
    }
    // FeatureGroup is to store editable layers.
    var drawnItems = new L.featureGroup().addTo(
        map_24b779df8d51480c8aedd059613f930c
    );
    options.edit.featureGroup = drawnItems;
    var draw_control_ab42e354e940451185d0b73a75ea350b = new L.Control.Draw(
        options
    ).addTo(map_24b779df8d51480c8aedd059613f930c);
    map_24b779df8d51480c8aedd059613f930c.on(L.Draw.Event.CREATED, function (e) {
        var layer = e.layer,
            type = e.layerType;
        var coords = JSON.stringify(layer.toGeoJSON());
        layer.on('click', function () {
            alert(coords);
            console.log(coords);
        });
        drawnItems.addLayer(layer);
    });
    map_24b779df8d51480c8aedd059613f930c.on('draw:created', function (e) {
        drawnItems.addLayer(e.layer);
    });

    document.getElementById('export').onclick = function (e) {
        var data = drawnItems.toGeoJSON();
        var convertedData = 'text/json;charset=utf-8,' +
            encodeURIComponent(JSON.stringify(data));
        document.getElementById('export').setAttribute(
            'href', 'data:' + convertedData
        );
        document.getElementById('export').setAttribute(
            'download', "data.geojson"
        );
    }



    var layer_control_c65bd376783c425eb8d1660d4244f017 = {
        base_layers: {
            "Sat\u00e9lite": tile_layer_610ff3de1a5141008e135ea22cad902e,
            "Topografia": tile_layer_53e7838200ac4d65982559df9f6306e7,
        },
        overlays: {},
    };
    L.control.layers(
        layer_control_c65bd376783c425eb8d1660d4244f017.base_layers,
        layer_control_c65bd376783c425eb8d1660d4244f017.overlays, {
            "autoZIndex": true,
            "collapsed": true,
            "position": "topright"
        }
    ).addTo(map_24b779df8d51480c8aedd059613f930c);
    tile_layer_53e7838200ac4d65982559df9f6306e7.remove();


    var measure_control_1929ca9a7dcc4621b9fbb7877ab3866f = new L.Control.Measure({
        "position": "topright",
        "primaryAreaUnit": "sqmeters",
        "primaryLengthUnit": "meters",
        "secondaryAreaUnit": "acres",
        "secondaryLengthUnit": "miles"
    });
    map_24b779df8d51480c8aedd059613f930c.addControl(measure_control_1929ca9a7dcc4621b9fbb7877ab3866f);



    var marker_e45fe24ddef04d308760769509964c2c = L.marker(
        [-11.899775, -45.697273], {}
    ).addTo(map_24b779df8d51480c8aedd059613f930c);


    var icon_02e3bf9086604f2cbb9eece5b47a2038 = L.AwesomeMarkers.icon({
        "extraClasses": "fa-rotate-0",
        "icon": "home",
        "iconColor": "#F8F88",
        "markerColor": "orange",
        "prefix": "glyphicon"
    });
    marker_e45fe24ddef04d308760769509964c2c.setIcon(icon_02e3bf9086604f2cbb9eece5b47a2038);


    marker_e45fe24ddef04d308760769509964c2c.bindTooltip(
        `<div>
                     Sede da Fazenda
                 </div>`, {
            "sticky": true
        }
    );
</script>